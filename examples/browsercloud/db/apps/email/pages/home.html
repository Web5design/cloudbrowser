<div id='feedback' data-bind='text: feedback'>
</div>
<ul id='box-list' data-bind="template: {name: 'boxList', foreach: boxes, afterRender: boxListCB}">
</ul>
<table id='msg-list'>
    <thead>
        <tr>
            <th>From</th>
            <th>Subject</th>
            <th>Date</th>
        </tr>
    </thead>
    <tbody data-bind="template: {name: 'msgList', foreach: currentMsgs, afterRender: currentMsgsCB}">
    </tbody>
</table>
<div data-bind="text: currentMsg"></div>

<script id='boxList' type='text/html'>
    <li data-box='${name}'>${name}</li>
</script>

<script id='msgList' type='text/html'>
    <tr data-msgid='${id}'>
        <td>${from}</td>
        <td>${subject}</td>
        <td>${date}</td>
    </tr>
</script>

<script>
    (function () {
        var fs = require('fs');
        var path = require('path');
        var jsPath = path.resolve(process.cwd(), 'db', 'apps', 'email', 'pages', 'home.js');
        var js = fs.readFileSync(jsPath);
        window.run(js, 'pages/home.js');
    })();
</script>

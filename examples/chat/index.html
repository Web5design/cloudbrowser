<html>
    <head>
        <script src='js/jquery-1.6.2.js'></script>
        <script src='js/knockout-1.3.0beta.debug.js'></script>
        <script src='js/vt-bootstrapper.js'></script>
        <script>
            // TODO: we could open new chat rooms in tabs, showing off embedding.
            // TODO: and then the main page is this config page.
            $(function () {
                var Path = require('path');
                var viewModel = {
                    newRoomName  : ko.observable("New Room"),
                    selectedRoom : ko.observable(vt.shared.rooms()[0]),
                    rooms        : vt.shared.rooms
                };
                ko.applyBindings(viewModel);
                $('#join-button').click(function () {
                    viewModel.selectedRoom().launch();
                });
                $('#create-button').click(function () {
                    // TODO: it would be nice to be able to pass template
                    //       variables to the browser, like a username.
                    var browser = vt.createBrowser({
                        id  : viewModel.newRoomName(),
                        app : Path.join(process.__dirname, 'room.html')
                    });
                    viewModel.rooms.push(browser);
                    viewModel.selectedRoom(browser);
                });
            });
        </script>
    </head>
    <body>
        <h3>Join a room</h3>
        Rooms: <select data-bind="options: rooms, optionsText: 'id', value: selectedRoom"></select>
        <button id='join-button'>Join</button>

        <br />
        <br />
        <h3>Create a new room</h3>
        Name: <input type='text' data-bind='value: newRoomName'></input>
        <button id='create-button'>Create</button>
    </body>
</html>

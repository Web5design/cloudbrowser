<html>
    <head>
        <title>GMail IMAP client</title>
        <script>
            window.addEventListener('load', function () {
                browser.state = browser.state || {}
                var button = document.getElementById('login_button');
                button.addEventListener('click', function () {
                    browser.state.username = document.getElementById('username').value;
                    browser.state.password = document.getElementById('password').value;
                    browser.load('http://localhost:3001/email.html');
                });
            });
            if (browser.state.error) {
                var div = document.getElementById('feedback');
                while (div.hasChildNodes()) {
                    div.removeChild(div.firstChild);
                }
                var elem = document.createTextNode(browser.state.error);
                div.appendChild(elem);
            }
        </script>
    </head>
    <body>
        <div id='feedback'></div>
        <div id='login'>
            Username: <input type='text' id='username' /><br />
            Password: <input type='password' id='password' /><br />
            <button type="button" id="login_button">Login</button>
        </div>
    </body>
</html>
